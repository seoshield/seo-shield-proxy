# SEO Shield Proxy - Environment Variables

# ============================================
# REQUIRED CONFIGURATION
# ============================================

# Target URL of your SPA application
# This is where the reverse proxy will forward requests
# Example: https://my-spa-app.com
TARGET_URL=https://example.com

# ============================================
# OPTIONAL CONFIGURATION
# ============================================

# Server port (default: 8080)
PORT=8080

# Cache TTL in seconds (default: 3600 = 1 hour)
# How long rendered HTML should be cached before re-rendering
CACHE_TTL=3600

# Cache type (default: memory)
# Options: memory, redis
# - memory: Fast but volatile (data lost on restart, not shared across pods)
# - redis: Persistent and scalable (survives restarts, shared across pods)
CACHE_TYPE=memory

# Redis connection URL (only used when CACHE_TYPE=redis)
# Format: redis://[username][:password]@hostname[:port]/[db]
# Examples:
#   - Local: redis://localhost:6379
#   - With password: redis://:mypassword@localhost:6379
#   - Remote: redis://user:pass@redis.example.com:6379/0
# REDIS_URL=redis://localhost:6379

# Puppeteer timeout in milliseconds (default: 30000 = 30 seconds)
# Maximum time to wait for page rendering
PUPPETEER_TIMEOUT=30000

# Maximum concurrent renders (default: 5)
# Limits how many pages can be rendered simultaneously
# Higher values = more throughput but more RAM usage
# Recommended: 5-10 for 4GB RAM, 10-20 for 8GB RAM
MAX_CONCURRENT_RENDERS=5

# Node environment (default: production)
# Options: development, production
NODE_ENV=production

# ============================================
# CACHE RULES CONFIGURATION
# ============================================

# URLs that should NEVER be cached or rendered (comma-separated patterns)
# These URLs will be proxied directly to your SPA without SSR
# Supports wildcards (*) and regex (wrap in /.../)
# Examples:
#   - Literal paths: /checkout,/cart,/login
#   - Wildcards: /admin/*,/api/*,/user/*/settings
#   - Regex: /\/blog\/[0-9]+\/edit/
NO_CACHE_PATTERNS=/checkout,/cart,/admin/*,/api/*

# URLs that SHOULD be cached (comma-separated patterns)
# If specified, ONLY these patterns will be cached (whitelist mode)
# Leave empty to use CACHE_BY_DEFAULT behavior
# Examples:
#   - Blog posts: /blog/*,/posts/*
#   - Product pages: /products/*,/category/*
#   - Static pages: /about,/contact,/help
# CACHE_PATTERNS=/blog/*,/products/*,/category/*

# Default caching behavior when URL doesn't match any pattern
# 'true' = cache everything by default (recommended for content-heavy sites)
# 'false' = cache nothing by default, only explicit CACHE_PATTERNS
CACHE_BY_DEFAULT=true

# Meta tag name that your SPA can use to control caching dynamically
# Your SPA can add this meta tag to prevent caching of specific pages:
#   <meta name="x-seo-shield-cache" content="false">
# To allow caching (default behavior):
#   <meta name="x-seo-shield-cache" content="true">
CACHE_META_TAG=x-seo-shield-cache

# ============================================
# ADVANCED CONFIGURATION
# ============================================

# Use single-process mode for Puppeteer (default: false)
# WARNING: Only use in development or specific Docker environments
# Single-process mode can cause memory leaks in production
# PUPPETEER_SINGLE_PROCESS=true

# Maximum number of metrics log entries to keep (default: 1000)
# Higher values use more memory but provide more historical data
# METRICS_LOG_SIZE=1000

# ============================================
# ADMIN PANEL CONFIGURATION
# ============================================

# Admin panel password (default: admin123)
# Change this in production for security
ADMIN_PASSWORD=admin123

# ============================================
# DEBUG MODE & RENDER PREVIEW
# ============================================

# Debug mode allows you to preview what bots see without changing User-Agent
# Usage:
#   - Simple preview: https://your-site.com/page?_render=true
#   - Debug mode with metrics: https://your-site.com/page?_render=debug
#
# Debug mode shows:
#   - Render time, cache status, queue metrics
#   - HTTP status codes, cache decisions
#   - Full debug info as HTTP headers and HTML comments
#
# See docs/debug-mode.md for full documentation
